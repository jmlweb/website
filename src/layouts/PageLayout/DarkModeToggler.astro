---
import { Icon } from 'astro-icon/components';
---

<button
  class="inline-flex justify-center items-center size-10 -mr-2 text-indigo-500 hover:text-indigo-600 dark:text-orange-200 dark:hover:text-yellow-200 opacity-50 cursor-wait transition-colors"
  id="theme-toggler"
>
  <Icon
    name="ri:moon-line"
    aria-label="Enable dark mode"
    class="~size-5/6 inline-block dark:hidden"
  />
  <Icon
    name="ri:sun-line"
    aria-label="Enable light mode"
    class="~size-5/6 hidden dark:inline-block"
  />
</button>

<noscript>
  <style>
    #theme-toggler {
      display: none;
    }
  </style>
</noscript>

<script>
  import { theme } from './store';

  const themeToggler = document.querySelector<HTMLButtonElement>('#theme-toggler');
  if (themeToggler) {
    themeToggler.classList.remove('opacity-50');
    themeToggler.classList.remove('cursor-wait');

    themeToggler.addEventListener('click', () => {
      theme.set(theme.get() === 'dark' ? 'light' : 'dark');
    });
  }
</script>
